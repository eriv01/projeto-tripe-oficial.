<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Protocolo TRIPE - Oficial</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #ef4444; --bg: #0a0a0a; --card: #141414; --text: #ffffff; --muted: #9ca3af; --border: #262626; }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg ); color: var(--text); min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .quiz-card { width: 100%; max-width: 450px; background: var(--card); border: 1px solid var(--border); border-radius: 24px; padding: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.6); text-align: center; }
        .fixed-header { font-size: 10px; font-weight: 900; color: var(--primary); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 20px; }
        .progress-bar { height: 4px; background: var(--border); border-radius: 10px; margin-bottom: 30px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s ease; }
        .question-title { font-size: 24px; font-weight: 900; margin-bottom: 15px; line-height: 1.3; }
        .options-grid { display: grid; gap: 12px; margin-bottom: 25px; }
        .option-btn { background: var(--card); border: 2px solid var(--border); color: var(--text); padding: 16px; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.2s; }
        .option-btn.selected { border-color: var(--primary); background: rgba(239, 68, 68, 0.2); }
        .btn-next { background: var(--primary); color: white; border: none; padding: 18px; border-radius: 12px; font-weight: 900; cursor: pointer; width: 100%; font-size: 16px; }
        .screen { display: none; }
        .screen.active { display: block; }
        .urgency-badge { background: rgba(239, 68, 68, 0.2); border: 2px solid var(--primary); padding: 10px 15px; border-radius: 50px; display: inline-block; margin-bottom: 20px; font-weight: 900; color: var(--primary); font-size: 12px; }
        .carousel { width: 100%; height: 250px; background: #000; border-radius: 15px; margin: 15px 0; overflow: hidden; position: relative; border: 1px solid var(--border); }
        .slide { position: absolute; inset: 0; opacity: 0; transition: opacity 0.6s ease; }
        .slide.active { opacity: 1; }
        .slide img { width: 100%; height: 100%; object-fit: cover; }
        .slide-info { position: absolute; bottom: 0; width: 100%; background: rgba(0,0,0,0.8); padding: 8px; font-size: 12px; }
        .loading-bar-container { text-align: left; margin-bottom: 12px; }
        .loading-label { font-size: 11px; color: var(--muted); margin-bottom: 4px; display: block; }
        .loading-bar { height: 6px; background: var(--border); border-radius: 10px; overflow: hidden; }
        .loading-fill { height: 100%; background: var(--primary); width: 0%; animation: load 2s infinite; }
        @keyframes load { 0% { width: 0%; } 50% { width: 100%; } 100% { width: 100%; } }
        .result-badge { background: var(--primary); color: white; padding: 15px; border-radius: 12px; margin-bottom: 15px; font-weight: 900; font-size: 28px; }
    </style>
</head>
<body>
    <div class="quiz-card">
        <div id="s-0" class="screen active">
            <div class="fixed-header">AVALIA√á√ÉO PERSONALIZADA - M√âTODO TRIPE</div>
            <div class="question-title" id="sal-title">VOC√ä EST√Å A UM PASSO...</div>
            <p style="color: var(--muted); margin-bottom: 25px;" id="sal-sub">De descobrir seu verdadeiro potencial sexual</p>
            <button class="btn-next" onclick="next()">INICIAR AGORA</button>
        </div>
        <div id="s-1" class="screen">
            <div class="fixed-header">AVALIA√á√ÉO PERSONALIZADA - M√âTODO TRIPE</div>
            <div class="progress-bar"><div class="progress-fill" id="p-fill"></div></div>
            <div id="q-box"></div>
        </div>
        <div id="s-2" class="screen">
            <div class="urgency-badge">üî• 164 homens avaliando agora</div>
            <div class="fixed-header">PROCESSANDO SEUS DADOS...</div>
            <div class="carousel">
                <div class="slide active">
                    <img src="https://metodotripe.shop/wp-content/uploads/2026/01/22109742.jpg">
                    <div class="slide-info"><strong>Ricardo, 34 anos</strong> ‚Ä¢ +4.2cm em 28 dias</div>
                </div>
                <div class="slide">
                    <img src="https://metodotripe.shop/wp-content/uploads/2026/01/meaSaaTbaAaaaamhD_iLJzfk9u2QO-ZC1.jpg">
                    <div class="slide-info"><strong>Marcelo, 41 anos</strong> ‚Ä¢ +3.8cm em 30 dias</div>
                </div>
                <div class="slide">
                    <img src="https://metodotripe.shop/wp-content/uploads/2026/01/paciente-D-antes-e-depois-alongamento-peniano-faloplastia-fotor-20260119195743.png">
                    <div class="slide-info"><strong>Felipe, 28 anos</strong> ‚Ä¢ +5.1cm em 35 dias</div>
                </div>
                <div class="slide">
                    <img src="https://metodotripe.shop/wp-content/uploads/2024/12/WhatsApp-Image-2024-12-18-at-15.11.46-rcl53qv1p0gr5s3fzr30gvvchnyybvpbhth13gqhj4.jpeg">
                    <div class="slide-info"><strong>Jo√£o, 45 anos</strong> ‚Ä¢ +4.5cm em 32 dias</div>
                </div>
                <div class="slide">
                    <img src="https://metodotripe.shop/wp-content/uploads/2026/01/Fotos-de-penis-grande10.jpg">
                    <div class="slide-info"><strong>Marcos, 39 anos</strong> ‚Ä¢ +4.8cm em 29 dias</div>
                </div>
            </div>
            <div id="loading-steps">
                <div class="loading-bar-container"><span class="loading-label">‚úì Analisando tecidos cavernosos...</span><div class="loading-bar"><div class="loading-fill"></div></div></div>
                <div class="loading-bar-container"><span class="loading-label">‚è≥ Verificando densidade dos corpos cavernosos...</span><div class="loading-bar"><div class="loading-fill" style="animation-delay: 0.5s"></div></div></div>
                <div class="loading-bar-container"><span class="loading-label">‚è≥ Ajustando protocolo de expans√£o celular...</span><div class="loading-bar"><div class="loading-fill" style="animation-delay: 1s"></div></div></div>
                <div class="loading-bar-container"><span class="loading-label">‚è≥ Validando compatibilidade de tecidos...</span><div class="loading-bar"><div class="loading-fill" style="animation-delay: 1.5s"></div></div></div>
            </div>
            <p style="font-size: 12px; color: var(--muted ); margin-top: 15px;">Comparando com 10.847 casos de sucesso...</p>
        </div>
        <div id="s-3" class="screen">
            <div class="fixed-header">RESULTADO GERADO</div>
            <div class="result-badge" id="res-val">+4.5cm</div>
            <p style="margin-bottom: 20px; color: var(--muted);" id="res-text">Voc√™ pode ganhar at√© <strong style="color: white" id="res-txt"></strong> em 30 dias.</p>
            <button class="btn-next" onclick="finish()" id="cta-btn">ACESSAR PROTOCOLO TRIPE</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, set, update, get, serverTimestamp, increment } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        const firebaseConfig = {
            apiKey: "AIzaSyCDYmSVU2xVVuLw0vu3svKI7n4hvdxjW0w",
            authDomain: "projeto-tripe-oficial.firebaseapp.com",
            databaseURL: "https://projeto-tripe-oficial-default-rtdb.firebaseio.com",
            projectId: "projeto-tripe-oficial",
            storageBucket: "projeto-tripe-oficial.firebasestorage.app",
            messagingSenderId: "274742031259",
            appId: "1:274742031259:web:18dc5c086fe3d58b56673e"
        };

        const app = initializeApp(firebaseConfig );
        const db = getDatabase(app);
        const sid = 's_' + Date.now() + Math.random().toString(36).substr(2, 5);

        let step = 0, qIdx = 0, variantIdx = 0, stepStartTime = 0;

        const SALUTATIONS = [
            { title: "VOC√ä EST√Å A UM PASSO...", subtitle: "De descobrir seu verdadeiro potencial sexual" },
            { title: "ESPERA ABRINDO...", subtitle: "Seu diagn√≥stico de ganho peniano personalizado" },
            { title: "CARREGANDO PROTOCOLO...", subtitle: "Que vai transformar sua vida sexual" },
            { title: "INICIANDO AVALIA√á√ÉO...", subtitle: "Baseada em 10.847 casos de sucesso" },
            { title: "PREPARANDO RESULTADO...", subtitle: "Que vai surpreender voc√™" }
        ];

        const RESULTS_COPY = [
            "Voc√™ pode ganhar at√© {val} em 30 dias.",
            "Diagn√≥stico: Seu potencial √© de {val}.",
            "ATEN√á√ÉO: Voc√™ tem um potencial reprimido de {val}.",
            "Resultado: Seu membro pode atingir {val} extras.",
            "Parab√©ns! Voc√™ pode ganhar {val} em 4 semanas."
        ];

        const CTA_COPY = [
            "ACESSAR PROTOCOLO TRIPE",
            "QUERO MEU MEMBRO MAIOR AGORA",
            "LIBERAR ACESSO AO M√âTODO",
            "COME√áAR MINHA TRANSFORMA√á√ÉO",
            "SIM! QUERO AUMENTAR MEU P√äNIS"
        ];

        // --- AS 5 VARIA√á√ïES DE PERGUNTAS REAIS (35 PERGUNTAS √öNICAS) ---
        const ALL_QUESTIONS = [
            // Variante A: Foco em Sa√∫de e H√°bitos
            [
                { id: 'ere√ß√£o', t: 'Qual sua frequ√™ncia de ere√ß√£o matinal?', o: ['Quase nunca', 'Raramente', '√Äs vezes', 'Frequentemente', 'Sempre'] },
                { id: 'sono', t: 'Quantas horas voc√™ dorme por noite?', o: ['Menos de 5h', '5-6h', '6-7h', '7-8h', 'Mais de 8h'] },
                { id: 'dieta', t: 'Como √© sua alimenta√ß√£o?', o: ['Muito ruim', 'Ruim', 'M√©dia', 'Boa', 'Excelente'] },
                { id: 'exercicio', t: 'Qual sua frequ√™ncia de exerc√≠cios?', o: ['Nunca', '1-2x/semana', '3-4x/semana', '5-6x/semana', 'Diariamente'] },
                { id: 'estresse', t: 'Como voc√™ avalia seu n√≠vel de estresse?', o: ['Muito alto', 'Alto', 'Moderado', 'Baixo', 'Muito baixo'] },
                { id: 'desempenho', t: 'Como √© seu desempenho sexual?', o: ['Muito ruim', 'Ruim', 'M√©dio', 'Bom', 'Excelente'] },
                { id: 'duracao', t: 'Quanto tempo voc√™ dura na cama?', o: ['Menos de 2min', '2-5min', '5-10min', '10-15min', 'Mais de 15min'] }
            ],
            // Variante B: Foco em Anatomia e Objetivos
            [
                { id: 'idade', t: 'Qual a sua faixa et√°ria atual?', o: ['18-25', '26-35', '36-45', '46-55', '55+'] },
                { id: 'objetivo', t: 'Qual seu maior desejo hoje?', o: ['Aumentar tamanho', 'Mais rigidez', 'Durar mais', 'Mais libido'] },
                { id: 'tentativas', t: 'J√° usou algum estimulante ou bomba?', o: ['Nunca usei', 'Sim, mas sem sucesso', 'Sim, funcionou pouco'] },
                { id: 'saude', t: 'Possui alguma condi√ß√£o como Diabetes?', o: ['N√£o', 'Sim, Diabetes', 'Sim, Press√£o Alta', 'Outras'] },
                { id: 'vicio', t: 'Voc√™ fuma ou consome √°lcool?', o: ['N√£o', 'Apenas socialmente', 'Sim, frequentemente'] },
                { id: 'energia', t: 'Como est√° sua disposi√ß√£o f√≠sica?', o: ['Sempre cansado', 'Normal', 'Muita energia'] },
                { id: 'foco', t: 'Consegue manter a ere√ß√£o at√© o fim?', o: ['Sim, sempre', '√Äs vezes falha', 'Tenho muita dificuldade'] }
            ],
            // Variante C: Foco em Performance e Confian√ßa
            [
                { id: 'confianca', t: 'Como est√° sua confian√ßa na hora H?', o: ['Muito baixa', 'Inseguro', 'Normal', 'Totalmente confiante'] },
                { id: 'parceira', t: 'Sua parceira j√° reclamou de algo?', o: ['Nunca', 'Sim, do tamanho', 'Sim, da dura√ß√£o', 'Sim, da falta de rigidez'] },
                { id: 'frequencia', t: 'Quantas vezes transa por semana?', o: ['Nenhuma', '1 vez', '2 a 3 vezes', 'Mais de 4 vezes'] },
                { id: 'porno', t: 'Consome conte√∫do adulto com frequ√™ncia?', o: ['N√£o', 'Raramente', 'Sim, todos os dias'] },
                { id: 'tamanho_atual', t: 'Qual seu tamanho estimado atual?', o: ['Menos de 10cm', '10-13cm', '13-16cm', 'Mais de 16cm'] },
                { id: 'recuperacao', t: 'Quanto tempo leva para a segunda dose?', o: ['Minutos', 'Algumas horas', 'S√≥ no dia seguinte', 'N√£o consigo'] },
                { id: 'prioridade', t: 'Resolver isso √© prioridade para voc√™?', o: ['Sim, urgente', 'Sim, mas posso esperar', 'Apenas curiosidade'] }
            ],
            // Variante D: Foco em Diagn√≥stico Biol√≥gico
            [
                { id: 'circulacao', t: 'Sente as m√£os ou p√©s frios com frequ√™ncia?', o: ['Sim', 'N√£o', '√Äs vezes'] },
                { id: 'libido', t: 'Como est√° seu desejo sexual hoje?', o: ['Inexistente', 'Baixo', 'Normal', 'Muito alto'] },
                { id: 'testosterona', t: 'J√° fez exame de testosterona?', o: ['Nunca fiz', 'Sim, estava baixa', 'Sim, estava normal'] },
                { id: 'gordura', t: 'Possui gordura acumulada no abd√¥men?', o: ['Muita', 'Pouca', 'Nada'] },
                { id: 'erecao_noturna', t: 'Percebe ere√ß√µes durante a noite?', o: ['Sim', 'N√£o', 'N√£o sei dizer'] },
                { id: 'sensibilidade', t: 'Como est√° sua sensibilidade?', o: ['Muito alta (r√°pido)', 'Normal', 'Baixa (demoro muito)'] },
                { id: 'compromisso', t: 'Seguiria um m√©todo de 5 min por dia?', o: ['Com certeza', 'Vou tentar', 'N√£o tenho tempo'] }
            ],
            // Variante E: Foco em Resultados R√°pidos
            [
                { id: 'pressa', t: 'Em quanto tempo quer ver resultados?', o: ['7 dias', '15 dias', '30 dias', 'N√£o tenho pressa'] },
                { id: 'investimento', t: 'J√° gastou dinheiro com solu√ß√µes falsas?', o: ['Nunca gastei', 'J√° gastei um pouco', 'J√° gastei muito'] },
                { id: 'suporte', t: 'Gostaria de acompanhamento no processo?', o: ['Sim, seria √≥timo', 'N√£o preciso'] },
                { id: 'discrecao', t: 'A discri√ß√£o da entrega √© importante?', o: ['Totalmente', 'Tanto faz'] },
                { id: 'ganho_desejado', t: 'Quantos cm seriam ideais para voc√™?', o: ['+2 a 3cm', '+4 a 5cm', '+6cm ou mais'] },
                { id: 'conhecimento', t: 'Conhece o M√©todo TRIPE?', o: ['J√° ouvi falar', 'Estou conhecendo agora', 'Vi um an√∫ncio'] },
                { id: 'decisao', t: 'Est√° pronto para o seu novo tamanho?', o: ['Sim, vamos l√°!', 'Ainda tenho d√∫vidas'] }
            ]
        ];

        window.next = () => {
            const currentQs = ALL_QUESTIONS[variantIdx];
            if (step === 0) { step = 1; render(); }
            else if (step === 1) {
                if (qIdx < currentQs.length - 1) { qIdx++; render(); }
                else { step = 2; render(); startProcessing(); }
            }
        };

        window.sel = (id, val) => {
            const hesitation = Date.now() - stepStartTime;
            update(ref(db, 'sessions/'+sid), { [id]: val, lastUpdate: serverTimestamp(), currentStep: qIdx + 1 });
            window.next();
        };

        window.finish = () => { 
            update(ref(db, 'sessions/'+sid), { status: 'checkout_clicked', lastUpdate: serverTimestamp() }); 
            window.location.href = "https://pay.wiapy.com/w-U6oehEBd?utm_source=" + sid + "&external_id=" + sid; 
        };

        function render( ) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('s-' + step).classList.add('active');
            
            if (step === 0) {
                const sal = SALUTATIONS[variantIdx];
                document.getElementById('sal-title').textContent = sal.title;
                document.getElementById('sal-sub').textContent = sal.subtitle;
            }
            
            if (step === 1) {
                const currentQs = ALL_QUESTIONS[variantIdx];
                const q = currentQs[qIdx];
                document.getElementById('p-fill').style.width = ((qIdx+1)/currentQs.length*100) + '%';
                document.getElementById('q-box').innerHTML = `<div class="question-title">${q.t}</div><div class="options-grid">${q.o.map((o, i) => `<button class="option-btn" onclick="sel('${q.id}', ${i})">${o}</button>`).join('')}</div>`;
                stepStartTime = Date.now();
            }
        }

        function startProcessing() {
            let sIdx = 0; const slides = document.querySelectorAll('.slide');
            const interval = setInterval(() => { 
                slides.forEach(s => s.classList.remove('active')); 
                sIdx = (sIdx + 1) % slides.length; 
                slides[sIdx].classList.add('active'); 
            }, 2000);

            setTimeout(() => { 
                clearInterval(interval); 
                step = 3;
                const resText = RESULTS_COPY[variantIdx].replace('{val}', `+5.0cm`);
                document.getElementById('res-txt').textContent = resText;
                document.getElementById('cta-btn').textContent = CTA_COPY[variantIdx];
                render();
            }, 10000);
        }

        function init() {
            render(); 
            get(ref(db, 'optimization/totalSessions')).then((snap) => {
                let total = snap.exists() ? snap.val() : 0;
                variantIdx = Math.floor(total / 10) % 5;
                const variantLetter = String.fromCharCode(65 + variantIdx);

                set(ref(db, 'sessions/'+sid), { 
                    enteredAt: serverTimestamp(), 
                    status: 'active', 
                    variantIdx: variantIdx,
                    variantName: "Variante " + variantLetter
                });

                update(ref(db, 'optimization'), { totalSessions: increment(1) });
                render();
            }).catch(() => { render(); });
        }
        init();
    </script>
</body>
</html>
